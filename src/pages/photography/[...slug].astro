---
import { getCollection, render } from 'astro:content';
import Baselayout from '../../layouts/Baselayout.astro';

export async function getStaticPaths() {
  const photos = await getCollection('photography');
  return photos.map(photo => ({
    params: { slug: photo.id }, props: { photo },
  }));
}

const { photo } = Astro.props;
const { Content } = await render(photo);

const formatDate = (date: Date) => {
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};
---

<Baselayout pageTitle={photo.data.title}>
    <article class="photo-post">
        <header style="margin-bottom: 3rem; text-align: center;">
            <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">{photo.data.title}</h1>
            <span class="date" style="font-family: var(--font-sans); color: #999; font-size: 0.9rem;">{formatDate(photo.data.date)}</span>
            <p style="margin-top: 1rem; color: #555;">{photo.data.description}</p>
        </header>
        
        {photo.data.cover && (
            <div style="margin-bottom: 3rem;">
                <img src={photo.data.cover} alt={photo.data.title} style="width: 100%; height: auto; display: block;" />
            </div>
        )}
        
        <div class="content" style="font-size: 1.1rem;">
            <Content />
        </div>
    </article>
</Baselayout>
