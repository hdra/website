---
import Baselayout from '../../layouts/Baselayout.astro';
import { getCollection } from "astro:content";

const allPhotos = await getCollection("photography");
const sortedPhotos = allPhotos.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

const formatDate = (date: Date) => {
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};
---

<Baselayout pageTitle="Photography">
    <div class="section-header">
        <h2>Photography</h2>
    </div>
    
    <div class="grid">
        {sortedPhotos.map((photo) => (
            <article class="card">
                {photo.data.cover && (
                    <img src={photo.data.cover} alt={photo.data.title} style="width: 100%; height: 200px; object-fit: cover; margin-bottom: 1rem; border-radius: 2px;" />
                )}
                <span class="date">{formatDate(photo.data.date)}</span>
                <h3><a href={`/photography/${photo.id}`}>{photo.data.title}</a></h3>
                <p>{photo.data.description}</p>
            </article>
        ))}
    </div>
</Baselayout>
