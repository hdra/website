---
import { getCollection, render } from 'astro:content';
import Baselayout from '../../layouts/Baselayout.astro';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map(project => ({
    params: { slug: project.id }, props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await render(project);

const formatDate = (date: Date) => {
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};
---

<Baselayout pageTitle={project.data.title}>
    <article class="project-post">
        <header style="margin-bottom: 3rem;">
            <span class="date" style="font-family: var(--font-sans); color: #999; font-size: 0.9rem;">{formatDate(project.data.date)}</span>
            <h1 style="margin-top: 0.5rem; font-size: 2.5rem;">{project.data.title}</h1>
            <p style="font-size: 1.2rem; color: #555;">{project.data.description}</p>
            
            {project.data.link && (
                <a href={project.data.link} target="_blank" rel="noopener noreferrer" style="display: inline-block; margin-top: 1rem; font-family: var(--font-sans);">Visit Project &rarr;</a>
            )}
        </header>
        
        <div class="content" style="font-size: 1.1rem;">
            <Content />
        </div>
    </article>
</Baselayout>
